<ion-header mode="ios">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>{{ data.sku }}</ion-title>

        <ion-buttons slot="end" class="tops">
            <span>箱率：{{ data.rate_container }}</span>
            <select (change)="toggleBoxRate()" [(ngModel)]="rateStatus" [disabled]="data.rate_container == 1">
                <!--  [disabled]='data.rate_container==1' -->
                <option value="inner">内箱</option>
                <option value="outer">外箱</option>
            </select>
        </ion-buttons>
        <ion-buttons slot="end">
            <ion-back-button defaultHref="/inspect-po" text="返回" color="white" mode="md"></ion-back-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <app-sku-info [sku]="data" type="implement"></app-sku-info>

    <div class="label-item">
        <ion-grid>
            <ion-row>
                <ion-col size="1.8">工厂备注:</ion-col>
                <ion-col size="10.2">{{ factory.factory_desc }}</ion-col>
            </ion-row>
        </ion-grid>
    </div>

    <div class="toggle-box">
        <!-- Default Segment -->
        <ion-segment (ionChange)="segmentChanged($event)" mode="ios" value="beforeUnpacking">
            <ion-segment-button value="beforeUnpacking" mode="ios">
                <ion-label>开箱前</ion-label>
            </ion-segment-button>
            <ion-segment-button value="afterUnpacking" mode="ios">
                <ion-label>开箱后</ion-label>
            </ion-segment-button>
            <ion-segment-button value="requirement" mode="ios">
                <ion-label>验货要求</ion-label>
            </ion-segment-button>
        </ion-segment>
    </div>

    <form [formGroup]="SkuInspectModel">
        <!-- [hidden]="currentToggle.key != 'beforeUnpacking'" -->
        <div class="out-box">
            <ion-list>
                <ion-item fxLayout="row" fxLayoutAlign="start center">
                    <div class="header-input" fxLayout="row" fxLayoutAlign="start center">
                        <label class="label">计划抽检数量</label>
                        <ion-input placeholder="0" type="number" formControlName="spotCheckNum"></ion-input>
                    </div>
                    <div class="header-input" fxLayout="row" fxLayoutAlign="start center">
                        <label class="label">PO号</label>
                        <ion-input placeholder="请填写PO号" formControlName="poNo" type="text"></ion-input>
                    </div>
                </ion-item>
            </ion-list>
        </div>

        <!-- 内箱 -->
        <div class="out-box" *ngIf="rateStatus == 'inner'" formGroupName="inner_box_data">
            <ion-list [hidden]="currentToggle.key != 'beforeUnpacking'">
                <ion-item>
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>唛头(照相需六面)</p>
                        </div>
                        <app-photograph
                            type="outer_box_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.shippingMarks.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>

                        <div class="desc-box">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.inner_box_data.shippingMarks.desc"
                                (onComplete)="descEnter($event, 'shippingMarks', 'inner')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="size">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>尺寸(单位：CM,叠高高度：1-2M）</p>
                        </div>

                        <div class="w100">
                            <ion-grid class="size-grid">
                                <ion-row align-items-center>
                                    <ion-col size="4">叠高尺寸</ion-col>
                                    <ion-col size="4">叠高数量</ion-col>
                                    <ion-col size="4">照片上传</ion-col>
                                </ion-row>

                                <ion-row align-items-center formGroupName="length">
                                    <ion-col size="4">
                                        <input type="number" placeholder="长" formControlName="text" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <input type="number" placeholder="0" formControlName="num" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <app-photograph
                                            type="size_pic_length"
                                            moduleType="removeSkuPic"
                                            [photos]="SkuInspectModel.value.inner_box_data.size.length.pic"
                                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                            [sku]="data.sku"
                                            box_type="inner"
                                        ></app-photograph>
                                    </ion-col>
                                </ion-row>

                                <ion-row align-items-center formGroupName="width">
                                    <ion-col size="4">
                                        <input type="number" placeholder="宽" formControlName="text" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <input type="number" placeholder="0" formControlName="num" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <app-photograph
                                            type="size_pic_width"
                                            moduleType="removeSkuPic"
                                            [photos]="SkuInspectModel.value.inner_box_data.size.width.pic"
                                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                            [sku]="data.sku"
                                            box_type="inner"
                                        ></app-photograph>
                                    </ion-col>
                                </ion-row>

                                <ion-row align-items-center formGroupName="height">
                                    <ion-col size="4">
                                        <input type="number" placeholder="高" formControlName="text" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <input type="number" placeholder="0" formControlName="num" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <app-photograph
                                            type="size_pic_height"
                                            moduleType="removeSkuPic"
                                            [photos]="SkuInspectModel.value.inner_box_data.size.height.pic"
                                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                            [sku]="data.sku"
                                            box_type="inner"
                                        ></app-photograph>
                                    </ion-col>
                                </ion-row>
                            </ion-grid>
                        </div>

                        <div class="desc-box">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.inner_box_data.size.desc"
                                (onComplete)="descEnter($event, 'size', 'inner')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <ion-list [hidden]="currentToggle.key != 'beforeUnpacking'">
                <ion-item formGroupName="barCode">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>条码</p>
                        </div>
                        <div class="bar-code" fxLayout="row" fxLayoutAlign="start center">
                            <input class="h-30" placeholder="请输入条码" formControlName="text" />
                            <ion-button [fill]="'clear'" (click)="scan()" [disabled]="barCode">
                                {{ barCode ? barCode : '扫码' }}
                            </ion-button>
                        </div>
                        <app-photograph
                            type="bar_code_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.barCode.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>

                        <div fxLayout="row" fxLayoutAlign="start center">
                            <p class="global-inspect-title gray-color">
                                是否六面条码一致？
                            </p>
                            <select class="select" formControlName="isTrue">
                                <option value="1">是</option>
                                <option value="0">否</option>
                            </select>
                        </div>
                        <div class="desc-box">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.inner_box_data.barCode.desc"
                                (onComplete)="descEnter($event, 'barCode', 'inner')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="grossWeight">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>毛重(单位：KG)</p>
                        </div>
                        <div class="maozhong">
                            <div fxLayout="row" fxLayoutAlign="start center" #grossWeight>
                                <input
                                    placeholder="请输入毛重"
                                    type="text"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text1"
                                />

                                <input
                                    placeholder="请输入毛重"
                                    type="text"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text2"
                                />

                                <input
                                    placeholder="请输入毛重"
                                    type="text"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text3"
                                />
                            </div>

                            <div fxLayout="row" class="mt-10" fxLayoutAlign="start center" *ngIf="otherGrossWeight">
                                <input
                                    placeholder="请输入毛重"
                                    type="text"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text4"
                                />
                                <input
                                    placeholder="请输入毛重"
                                    type="text"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text5"
                                />
                            </div>

                            <app-photograph
                                type="gross_weight_pic"
                                moduleType="removeSkuPic"
                                [photos]="SkuInspectModel.value.inner_box_data.grossWeight.photos"
                                [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                [sku]="data.sku"
                                box_type="inner"
                            ></app-photograph>
                            <div class="desc-box">
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.grossWeight.desc"
                                    (onComplete)="descEnter($event, 'grossWeight', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 摔箱测试 -->
            <ion-list [hidden]="currentToggle.key != 'beforeUnpacking'">
                <ion-item formGroupName="throwBox">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>摔箱测试</p>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="start center">
                            <div class="header-input w180" fxLayout="row" fxLayoutAlign="start center">
                                <label class="label">计划摔箱数</label>
                                <ion-input placeholder="0" type="number" formControlName="text"></ion-input>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                                <p class="global-inspect-title gray-color">是否通过：</p>
                                <select class="select" formControlName="isPass">
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </div>
                        </div>

                        <app-photograph
                            type="throw_box_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.throwBox.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <app-videotape
                            [videos]="SkuInspectModel.value.inner_box_data.throwBox.videos"
                            type="throw_box_video"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-videotape>
                        <div class="test-feedback">
                            <div>
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.inner_box_data.throwBox.desc"
                                        (onComplete)="descEnter($event, 'throwBox', 'inner')"
                                    ></app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 包装 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="packing">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>包装</p>
                        </div>

                        <div class="packing-info">
                            {{ data.packing_type }}
                        </div>
                        <p class="global-inspect-title gray-color desc-tips">
                            包含纸箱层数特写照片
                        </p>
                        <app-photograph
                            type="packing_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.packing.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>

                        <div class="test-feedback">
                            <div fxLayout="row" fxLayoutAlign="start center">
                                <div fxLayout="row" fxLayoutAlign="start center">
                                    <p class="global-inspect-title gray-color">
                                        是否与以上信息对应？
                                    </p>
                                    <select class="select" formControlName="isTrue">
                                        <option value="1">是</option>
                                        <option value="0">否</option>
                                    </select>
                                </div>

                                <div class="ml-10" fxLayout="row" fxLayoutAlign="start center">
                                    <p class="global-inspect-title gray-color">
                                        是否是双纸箱
                                    </p>
                                    <select class="select" formControlName="is_double_carton">
                                        <option value="1">是</option>
                                        <option value="0">否</option>
                                    </select>
                                </div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                                <div fxLayout="row" fxLayoutAlign="start center">
                                    <p class="global-inspect-title gray-color">
                                        请选择纸箱类型
                                    </p>
                                    <select class="select" formControlName="packingType">
                                        <option
                                            value="inner"
                                            *ngIf="SkuInspectModel.value.inner_box_data.packing.is_double_carton == 1"
                                        >
                                            内箱纸箱类型</option
                                        >
                                        <option
                                            value="outer"
                                            *ngIf="SkuInspectModel.value.inner_box_data.packing.is_double_carton == 1"
                                        >
                                            外箱纸箱类型</option
                                        >
                                        <option
                                            value="1"
                                            *ngIf="SkuInspectModel.value.inner_box_data.packing.is_double_carton == 0"
                                        >
                                            三层单瓦楞</option
                                        >
                                        <option
                                            value="2"
                                            *ngIf="SkuInspectModel.value.inner_box_data.packing.is_double_carton == 0"
                                        >
                                            五层双瓦楞</option
                                        >
                                        <option
                                            value="3"
                                            *ngIf="SkuInspectModel.value.inner_box_data.packing.is_double_carton == 0"
                                        >
                                            七层三瓦楞</option
                                        >
                                    </select>
                                </div>
                            </div>

                            <div>
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.inner_box_data.packing.desc"
                                        (onComplete)="descEnter($event, 'packing', 'inner')"
                                    ></app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 摆放图与说明书及配件包 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="layout">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>摆放图</p>
                        </div>
                        <app-photograph
                            type="product_place_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.layout.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <div class="pb-10">
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.layout.desc"
                                    (onComplete)="descEnter($event, 'layout', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="productDetail">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>产品细节图</p>
                        </div>

                        <app-photograph
                            type="product_detail_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.productDetail.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <div class="pb-10">
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.productDetail.desc"
                                    (onComplete)="descEnter($event, 'productDetail', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="instructions">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>说明书</p>
                        </div>

                        <div class="ask-about" fxLayout="row" fxLayoutAlign="start center">
                            <div class="item" fxLayout="row" fxLayoutAlign="start center">
                                <p class="global-inspect-title gray-color">是否有说明书</p>
                                <select class="select" formControlName="isHas">
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </div>

                            <div class="item ml-15" fxLayout="row" fxLayoutAlign="start center">
                                <label class="global-inspect-title gray-color">选择说明书类型</label>
                                <select class="select" formControlName="instructionsType">
                                    <option value="1">中性说明书</option>
                                    <option value="2">我司说明书</option>
                                </select>
                            </div>
                        </div>

                        <app-photograph
                            type="instructions_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.instructions.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <div class="pb-10">
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.instructions.desc"
                                    (onComplete)="descEnter($event, 'instructions', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="crews">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>螺丝包</p>
                        </div>

                        <div class="ask-about">
                            <div class="item" fxLayout="row" fxLayoutAlign="start center">
                                <p class="global-inspect-title gray-color">是否有螺丝包</p>
                                <select class="select" formControlName="isTrue">
                                    <option value="1">是</option>
                                    <option value="0">否</option>
                                </select>
                            </div>
                        </div>

                        <app-photograph
                            type="screws_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.crews.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <div class="pb-10">
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.crews.desc"
                                    (onComplete)="descEnter($event, 'crews', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 产品整体图 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="whole">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>产品整体图</p>
                        </div>
                        <app-photograph
                            type="product_wholes_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.whole.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <div class="pb-10">
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.whole.desc"
                                    (onComplete)="descEnter($event, 'whole', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="disputes">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>SKU中文描述</p>
                        </div>

                        <div class="packing-info">
                            {{ data.chinese_description }}
                        </div>

                        <div class="w100">
                            <div>
                                <ion-textarea formControlName="text" placeholder="请输入SKU描述争议"></ion-textarea>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 产品尺寸 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item>
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>产品尺寸(单位：CM)</p>
                        </div>
                        <inspect-product-size
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            (onChange)='productSizeChange($event)'
                            [sizes]='SkuInspectModel.value.inner_box_data.productSize'
                        ></inspect-product-size
                            >
                        <div class="pb-10" formGroupName='productSizeDesc'>
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.inner_box_data.productSizeDesc.desc"
                                    (onComplete)="descEnter($event, 'productSizeDesc', 'inner')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 净重 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="netWeight">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>净重(单位：KG)</p>
                        </div>
                        <div class="maozhong">
                            <div fxLayout="row" fxLayoutAlign="start center">
                                <ion-input
                                    placeholder="请输入净重"
                                    type="number"
                                    class="mr-10"
                                    formControlName="textOne"
                                >
                                </ion-input>

                                <ion-input placeholder="请输入净重" type="number" formControlName="textTwo"></ion-input>
                            </div>
                            <app-photograph
                                type="net_weight_pic"
                                moduleType="removeSkuPic"
                                [photos]="SkuInspectModel.value.inner_box_data.netWeight.photos"
                                [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                [sku]="data.sku"
                                box_type="inner"
                            ></app-photograph>
                            <div class="pb-10">
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.inner_box_data.netWeight.desc"
                                        (onComplete)="descEnter($event, 'netWeight', 'inner')"
                                    ></app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 外观检测选项 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="appearance">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>外观检测选项</p>
                        </div>
                        <div class="maozhong">
                            <ion-input placeholder="外观检测选项" type="number"></ion-input>
                            <app-photograph
                                type="appearance_pic"
                                moduleType="removeSkuPic"
                                [photos]="SkuInspectModel.value.inner_box_data.appearance.photos"
                                [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                [sku]="data.sku"
                                box_type="inner"
                            >
                            </app-photograph>
                            <app-videotape
                                [videos]="SkuInspectModel.value.inner_box_data.appearance.videos"
                                type="appearance_video"
                                [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                [sku]="data.sku"
                                box_type="inner"
                            ></app-videotape>
                            <div class="test-feedback">
                                <div>
                                    <p class="global-inspect-title  gray-color desc-tips">
                                        请输入说明
                                    </p>
                                    <div>
                                        <app-item-by-item-desc
                                            description="备注"
                                            [ary]="SkuInspectModel.value.inner_box_data.appearance.desc"
                                            (onComplete)="descEnter($event, 'appearance', 'inner')"
                                        >
                                        </app-item-by-item-desc>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 测试部分 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="function">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>功能性测试</p>
                        </div>
                        <app-photograph
                            type="functions_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.function.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <app-videotape
                            [videos]="SkuInspectModel.value.inner_box_data.function.videos"
                            type="functions_video"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-videotape>
                        <div class="test-feedback">
                            <div>
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.inner_box_data.function.desc"
                                        (onComplete)="descEnter($event, 'function', 'inner')"
                                    ></app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="bearing">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>承重测试</p>
                        </div>
                        <app-photograph
                            type="bearing_test_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.bearing.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <app-videotape
                            type="bearing_test_video"
                            [videos]="SkuInspectModel.value.inner_box_data.bearing.videos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-videotape>
                        <div class="test-feedback">
                            <div>
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.inner_box_data.bearing.desc"
                                        (onComplete)="descEnter($event, 'bearing', 'inner')"
                                    ></app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="waterContent">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>含水量检测</p>
                        </div>
                        <app-photograph
                            type="water_content_test_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.inner_box_data.waterContent.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-photograph>
                        <app-videotape
                            type="water_content_test_video"
                            [videos]="SkuInspectModel.value.inner_box_data.waterContent.videos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="inner"
                        ></app-videotape>
                        <div class="test-feedback">
                            <div>
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.inner_box_data.waterContent.desc"
                                        (onComplete)="descEnter($event, 'waterContent', 'inner')"
                                    >
                                    </app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 总结 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="sumUp">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>总结</p>
                        </div>

                        <div class="maozhong pb-10" fxLayout="row" fxLayoutAlign="space-between center">
                            <label for="" class="label mf">请输入实际抽检数量</label>
                            <ion-input
                                placeholder="请输入实际抽检数量"
                                type="number"
                                class="w150"
                                class="mr-10"
                                formControlName="textOne"
                            ></ion-input>
                            <label for="" class="label mf">请输入实际摔箱数量</label>
                            <ion-input
                                placeholder="请输入实际摔箱数量"
                                type="number"
                                class="w150"
                                formControlName="textTwo"
                            >
                            </ion-input>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 备注 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="desc">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>备注</p>
                        </div>
                        <div class="maozhong pb-10">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.inner_box_data.desc.desc"
                                (onComplete)="descEnter($event, 'desc', 'inner')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 验货要求 -->
            <ion-grid
                class="inspection_require"
                *ngIf="currentToggle.key == 'requirement' && data.inspection_require && data.inspection_require.length"
            >
                <ion-row>
                    <ion-col [size]="1.8" align-self-center>验货条目</ion-col>
                    <ion-col [size]="3.1" align-self-center>验货要求</ion-col>
                    <ion-col [size]="3.1" align-self-center>验货标准</ion-col>
                    <ion-col [size]="4" align-self-center>要求反馈</ion-col>
                </ion-row>
                <ng-container *ngIf="data.inspection_require && data.inspection_require.length">
                    <ion-row *ngFor="let item of data.inspection_require; let i = index">
                        <ion-col align-self-center [size]="1.8" class="content" Chipboard class="chip-text ">
                            {{ item.theme_name }}
                        </ion-col>
                        <ion-col align-self-center [size]="3.1" class="content" Chipboard class="chip-text content">
                            {{ item.require }}
                        </ion-col>
                        <ion-col align-self-center [size]="3.1" class="content" Chipboard class="chip-text content">
                            {{ item.standard }}
                        </ion-col>
                        <ion-col align-self-center [size]="4">
                            <div>
                                <app-photograph
                                    type="inspection_require_pic"
                                    moduleType="removeSkuPic"
                                    [photos]="
                                        inspectionRequire && inspectionRequire[i] ? inspectionRequire[i].pic : null
                                    "
                                    [sort_index]="i"
                                    [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                    [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                    [sku]="data.sku"
                                    box_type="inner"
                                ></app-photograph>
                            </div>
                            <div>
                                <app-videotape
                                    [videos]="
                                        inspectionRequire && inspectionRequire[i] ? inspectionRequire[i].videos : null
                                    "
                                    type="inspection_require_video"
                                    [sort_index]="i"
                                    [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                    [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                    [sku]="data.sku"
                                    box_type="inner"
                                ></app-videotape>
                            </div>
                        </ion-col>
                    </ion-row>
                </ng-container>
                <ion-row *ngIf="data.inspection_require && !data.inspection_require.length">
                    <ion-col size="12" style="text-align: center" class="danger">暂无</ion-col>
                </ion-row>
            </ion-grid>
        </div>
        <!-- 外箱 -->
        <div class="out-box" *ngIf="rateStatus == 'outer'" formGroupName="outer_box_data">
            <ion-list [hidden]="currentToggle.key != 'beforeUnpacking'">
                <ion-item>
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>唛头(照相需六面)</p>
                        </div>

                        <app-photograph
                            type="outer_box_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.outer_box_data.shippingMarks.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="outer"
                        ></app-photograph>

                        <div class="desc-box">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.outer_box_data.shippingMarks.desc"
                                (onComplete)="descEnter($event, 'shippingMarks', 'outer')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="size">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>尺寸(单位：CM,叠高高度：1-2M）</p>
                        </div>

                        <div class="w100">
                            <ion-grid class="size-grid">
                                <ion-row align-items-center>
                                    <ion-col size="4">叠后尺寸</ion-col>
                                    <ion-col size="4">叠高数量</ion-col>
                                    <ion-col size="4">照片上传</ion-col>
                                </ion-row>

                                <ion-row align-items-center formGroupName="length">
                                    <ion-col size="4">
                                        <input type="number" placeholder="长" formControlName="text" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <input type="number" placeholder="0" formControlName="num" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <app-photograph
                                            type="size_pic_length"
                                            moduleType="removeSkuPic"
                                            [photos]="SkuInspectModel.value.outer_box_data.size.length.pic"
                                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                            [sku]="data.sku"
                                            box_type="outer"
                                        ></app-photograph>
                                    </ion-col>
                                </ion-row>

                                <ion-row align-items-center formGroupName="width">
                                    <ion-col size="4">
                                        <input type="number" placeholder="宽" formControlName="text" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <input type="number" placeholder="0" formControlName="num" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <app-photograph
                                            type="size_pic_width"
                                            moduleType="removeSkuPic"
                                            [photos]="SkuInspectModel.value.outer_box_data.size.width.pic"
                                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                            [sku]="data.sku"
                                            box_type="outer"
                                        ></app-photograph>
                                    </ion-col>
                                </ion-row>

                                <ion-row align-items-center formGroupName="height">
                                    <ion-col size="4">
                                        <input type="number" placeholder="高" formControlName="text" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <input type="number" placeholder="0" formControlName="num" />
                                    </ion-col>
                                    <ion-col size="4">
                                        <app-photograph
                                            type="size_pic_height"
                                            moduleType="removeSkuPic"
                                            [photos]="SkuInspectModel.value.outer_box_data.size.height.pic"
                                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                            [sku]="data.sku"
                                            box_type="outer"
                                        ></app-photograph>
                                    </ion-col>
                                </ion-row>
                            </ion-grid>
                        </div>

                        <div class="desc-box">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.outer_box_data.size.desc"
                                (onComplete)="descEnter($event, 'size', 'outer')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <ion-list [hidden]="currentToggle.key != 'beforeUnpacking'">
                <ion-item formGroupName="barCode">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>条码</p>
                        </div>
                        <div class="bar-code" fxLayout="row" fxLayoutAlign="start center">
                            <input class="h-30" placeholder="请输入条码" formControlName="text" />
                            <ion-button [fill]="'clear'" (click)="scan()" [disabled]="barCode">
                                {{ barCode ? barCode : '扫码' }}
                            </ion-button>
                        </div>
                        <app-photograph
                            type="bar_code_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.outer_box_data.barCode.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="outer"
                        ></app-photograph>

                        <div fxLayout="row" fxLayoutAlign="start center">
                            <p class="global-inspect-title gray-color">
                                是否六面条码一致？
                            </p>
                            <select class="select" formControlName="isTrue">
                                <option value="1">是</option>
                                <option value="0">否</option>
                            </select>
                        </div>
                        <div class="desc-box">
                            <app-item-by-item-desc
                                description="备注"
                                [ary]="SkuInspectModel.value.outer_box_data.barCode.desc"
                                (onComplete)="descEnter($event, 'barCode', 'outer')"
                            ></app-item-by-item-desc>
                        </div>
                    </div>
                </ion-item>

                <ion-item formGroupName="grossWeight">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>毛重(单位：KG)</p>
                        </div>
                        <div class="maozhong">
                            <div fxLayout="row" fxLayoutAlign="start center" #grossWeight>
                                <input
                                    placeholder="请输入毛重"
                                    type="number"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text1"
                                />

                                <input
                                    placeholder="请输入毛重"
                                    type="number"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text2"
                                />

                                <input
                                    placeholder="请输入毛重"
                                    type="number"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text3"
                                />
                            </div>

                            <div fxLayout="row" class="mt-10" fxLayoutAlign="start center" *ngIf="otherGrossWeight">
                                <input
                                    placeholder="请输入毛重"
                                    type="number"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text4"
                                />
                                <input
                                    placeholder="请输入毛重"
                                    type="number"
                                    (change)="calcGrossWeight()"
                                    class="mr-10"
                                    formControlName="text5"
                                />
                            </div>

                            <app-photograph
                                type="gross_weight_pic"
                                moduleType="removeSkuPic"
                                [photos]="SkuInspectModel.value.outer_box_data.grossWeight.photos"
                                [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                                [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                                [sku]="data.sku"
                                box_type="outer"
                            ></app-photograph>
                            <div class="desc-box">
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.outer_box_data.grossWeight.desc"
                                    (onComplete)="descEnter($event, 'grossWeight', 'outer')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 包装 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="packing">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>包装</p>
                        </div>

                        <div class="packing-info">
                            {{ data.packing_type }}
                        </div>
                        <p class="global-inspect-title gray-color desc-tips">
                            包含纸箱层数特写照片
                        </p>
                        <app-photograph
                            type="packing_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.outer_box_data.packing.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="outer"
                        ></app-photograph>

                        <div class="test-feedback">
                            <div fxLayout="row" fxLayoutAlign="start center">
                                <div fxLayout="row" fxLayoutAlign="start center">
                                    <p class="global-inspect-title gray-color">
                                        是否与以上信息对应？
                                    </p>
                                    <select class="select" formControlName="isTrue">
                                        <option value="1">是</option>
                                        <option value="0">否</option>
                                    </select>
                                </div>

                                <div class="ml-10" fxLayout="row" fxLayoutAlign="start center">
                                    <p class="global-inspect-title gray-color">
                                        是否是双纸箱
                                    </p>
                                    <select class="select" formControlName="is_double_carton">
                                        <option value="1">是</option>
                                        <option value="0">否</option>
                                    </select>
                                </div>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start center">
                                <div fxLayout="row" fxLayoutAlign="start center">
                                    <p class="global-inspect-title gray-color">
                                        请选择纸箱类型
                                    </p>
                                    <select class="select" formControlName="packingType">
                                        <option
                                            value="inner"
                                            *ngIf="SkuInspectModel.value.outer_box_data.packing.is_double_carton == 1"
                                        >
                                            内箱纸箱类型</option
                                        >
                                        <option
                                            value="outer"
                                            *ngIf="SkuInspectModel.value.outer_box_data.packing.is_double_carton == 1"
                                        >
                                            外箱纸箱类型</option
                                        >
                                        <option
                                            value="1"
                                            *ngIf="SkuInspectModel.value.outer_box_data.packing.is_double_carton == 0"
                                        >
                                            三层单瓦楞</option
                                        >
                                        <option
                                            value="2"
                                            *ngIf="SkuInspectModel.value.outer_box_data.packing.is_double_carton == 0"
                                        >
                                            五层双瓦楞</option
                                        >
                                        <option
                                            value="3"
                                            *ngIf="SkuInspectModel.value.outer_box_data.packing.is_double_carton == 0"
                                        >
                                            七层三瓦楞</option
                                        >
                                    </select>
                                </div>
                            </div>

                            <div>
                                <div>
                                    <app-item-by-item-desc
                                        description="备注"
                                        [ary]="SkuInspectModel.value.outer_box_data.packing.desc"
                                        (onComplete)="descEnter($event, 'packing', 'outer')"
                                    ></app-item-by-item-desc>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>

            <!-- 摆放图与说明书及配件包 -->
            <ion-list [hidden]="currentToggle.key != 'afterUnpacking'">
                <ion-item formGroupName="layout">
                    <div class="w100">
                        <div class="global-inspect-title">
                            <p>摆放图</p>
                        </div>
                        <app-photograph
                            type="product_place_pic"
                            moduleType="removeSkuPic"
                            [photos]="SkuInspectModel.value.outer_box_data.layout.photos"
                            [contract_no]="factory.sku_data[0].contract_data[0].contract_no"
                            [apply_inspection_no]="factory.sku_data[0].apply_inspection_no"
                            [sku]="data.sku"
                            box_type="outer"
                        ></app-photograph>
                        <div class="pb-10">
                            <div>
                                <app-item-by-item-desc
                                    description="备注"
                                    [ary]="SkuInspectModel.value.outer_box_data.layout.desc"
                                    (onComplete)="descEnter($event, 'layout', 'outer')"
                                ></app-item-by-item-desc>
                            </div>
                        </div>
                    </div>
                </ion-item>
            </ion-list>
        </div>
    </form>
</ion-content>

<ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="danger" (click)="save().subscribe()">
        <p>保存</p>
    </ion-fab-button>
</ion-fab>
